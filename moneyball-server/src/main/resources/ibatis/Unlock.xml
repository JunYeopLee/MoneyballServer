<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//BIATIS.com//DTD SQL Map 2.0//EN" "http://www.ibatis.com/dtd/sql-map-2.dtd">

<sqlMap namespace="Unlock">

	<typeAlias alias="userVO" type="com.server.moneyball.user.UserVO" />

	<resultMap id="userIdMap" class="userVO">
		<result property="userNum" column="USER_NUM" />
		<result property="id" column="ID" />
		<result property="money" column="MONEY" />
	</resultMap>

	<select id="selectUserMoney" resultMap="userIdMap" resultClass="userVO">
		select USER_NUM, ID, MONEY
		from moneyball.USER_TB 
		where USER_NUM = #userNum# 
	</select>
	

	<update id="subtractMoneyBall">
		update moneyball.USER_TB set money = #userMoney# where user_num = #userNum#
	</update>
	
	<update id="unlockTB" parameterClass="com.server.moneyball.unlock.UnlockReq">
		update moneyball.UNLOCK_TB 
		set UNLOCK3 = IF(#unlockNum#=3,1,UNLOCK3),
		 UNLOCK4 = IF(#unlockNum#=4,1,UNLOCK4),
		 UNLOCK5 = IF(#unlockNum#=5,1,UNLOCK5)
		where user_num = #userNum# and match_id = #matchNum#
	</update>
<!--	
	<delete id="delete" parameterClass="com.scg.h00.customerservice.SuggestRequest">
		delete from H11.SCS_SGS
	    where SGS_SEQNO = #seqNo#		
	</delete> -->

</sqlMap>